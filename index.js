"use strict";exports.__esModule=true;exports.DEFAULT_TEMPLATE_DIR=exports.USER_TEMPLATE_DIR=exports.EXTENSION=exports.DEFAULT_TEMPLATE=exports.ARGS=exports.readContent=exports.run=void 0;var tezcatl_cli_1=require("@makechtec/tezcatl-cli");var tezcatl_constants_1=require("@makechtec/tezcatl-constants");var tezcatl_conditional_processor_1=require("@makechtec/tezcatl-conditional-processor");var tezcatl_iterative_processor_1=require("@makechtec/tezcatl-iterative-processor");var pipe_1=require("@makechtec/pipe");var node_process_1=require("node:process");var run=function(){var component=tezcatl_cli_1.CLI.getArgumentValue(exports.ARGS.component);var template=tezcatl_cli_1.CLI.getArgumentValue(exports.ARGS.template);var targetDir=tezcatl_cli_1.CLI.getArgumentValue(exports.ARGS.targetDir);var placeholders=tezcatl_cli_1.CLI.getAllArguments();var file=tezcatl_cli_1.CLI.getArgumentValue(exports.ARGS.file);var ext=tezcatl_cli_1.CLI.getArgumentValue(exports.ARGS.ext);if(ext.value==""){ext.value=exports.EXTENSION}if(template.value==""){template.value=exports.DEFAULT_TEMPLATE}if(file.value==""){file.value=component.value}var fileName=targetDir.value+"/"+file.value+ext.value;var content=(0,exports.readContent)(template.value+tezcatl_constants_1.TEMPLATE_EXTENSION);var conditionalProcessor=new tezcatl_conditional_processor_1.ConditionalProcessor;var iterativeProcessor=new tezcatl_iterative_processor_1.IterativeProcessor;var pipe=new pipe_1.Pipe(content);pipe.addAction((function(newContent){return conditionalProcessor.parse(newContent)})).addAction((function(newContent){return iterativeProcessor.parse(newContent)})).addAction((function(newContent){return tezcatl_cli_1.Reader.changePlaceholders(newContent,placeholders)})).addAction((function(newContent){tezcatl_cli_1.Writter.writeFile(fileName,newContent)})).execActions()};exports.run=run;var readContent=function(templateName){var userTemplatePath=exports.USER_TEMPLATE_DIR+"/"+templateName;var defaultTemplatePath=exports.DEFAULT_TEMPLATE_DIR+"/"+templateName;var content=tezcatl_cli_1.Reader.readTemplate(userTemplatePath);if(content==""){content=tezcatl_cli_1.Reader.readTemplate(defaultTemplatePath)}return content};exports.readContent=readContent;exports.ARGS={component:"com",template:"temp",targetDir:"dir",file:"file",ext:"ext"};exports.DEFAULT_TEMPLATE="react-component";exports.EXTENSION=".jsx";exports.USER_TEMPLATE_DIR=(0,node_process_1.cwd)()+"/templates";exports.DEFAULT_TEMPLATE_DIR=(0,node_process_1.cwd)()+"/node_modules/@makechtec/tezcatl-preset-react/templates";